<!DOCTYPE html>
<html>
<head>
	<title>Interactive Canvas</title>
	<script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>

	<script>
	/** Global vars for canvas */
	var stage, output;

	/** Global vars for canvas size */
	var canvasId     = 'demoCanvas';
	var canvasWidth  = 800;
	var canvasHeight = 300;

	/** Global var for 'current' selector circle obj */
	var selectorCurrent; 
	
	/** Global var for 'target' selector circle obj */
	var selectorTarget; 


	/**
	 * init()
	 * Setup canvas.
	 */
	function init() {
		//set canvas side using global vars
		setCanvasSize();

		//Create new canvas
		stage = new createjs.Stage(canvasId);

		// For mobile devices.
		createjs.Touch.enable(stage);
		
		// this lets our drag continue to track the mouse even when it leaves the canvas
		stage.mouseMoveOutside = true; 
		

		//Create Grid for input reference
		var color = '#F3F3F3';

		// Vertical line
		var line = new createjs.Shape();
		line.graphics.setStrokeStyle(3);
		line.graphics.beginStroke(color);
		line.graphics.moveTo(canvasWidth/2,canvasHeight); //start x,y
		line.graphics.lineTo(canvasWidth/2,0);            //end x,y
		line.graphics.endStroke();
		stage.addChild(line);

		// Horizontal line
		var line = new createjs.Shape();
		line.graphics.setStrokeStyle(3);
		line.graphics.beginStroke(color);
		line.graphics.moveTo(0,canvasHeight/2);	          //start x,y
		line.graphics.lineTo(canvasWidth,canvasHeight/2); //end x,y
		line.graphics.endStroke();
		stage.addChild(line);

		// Helper text		
		var offsetX = canvasWidth/10;
		var offsetY = canvasHeight/10;
		// For x dimension
		stage.addChild( new createjs.Text("Low dimen X", "20px Arial", "#ff7700").set({x:(canvasWidth/4)-offsetX,y:(canvasHeight-offsetY)}) );
		stage.addChild( new createjs.Text("High dimen X", "20px Arial", "#ff7700").set({x:(canvasWidth/2+canvasWidth/4)-offsetX,y:(canvasHeight-offsetY)}) );
		// For y dimension
		stage.addChild( new createjs.Text("High dimen Y", "20px Arial", "#ff7700").set({x:canvasWidth-offsetY,y:(canvasHeight),rotation:-90}) );
		stage.addChild( new createjs.Text("High dimen Y", "20px Arial", "#ff7700").set({x:canvasWidth-offsetY,y:(canvasHeight/2)-offsetY,rotation:-90}) );


		// Selector Current
		// Add circle for current selector obj
		selectorCurrent = new createjs.Shape();
		selectorCurrent.graphics.beginFill("red").drawCircle(0, 0, 20);
		
		var labelCurrent = new createjs.Text("Current", "bold 10px Arial", "#FFFFFF");
		labelCurrent.textAlign = "center";
		labelCurrent.y = -7;
		
		var draggerCurrent = new createjs.Container();
		draggerCurrent.x = draggerCurrent.y = 100;
		draggerCurrent.addChild(selectorCurrent, labelCurrent);
		stage.addChild(draggerCurrent);
		
		draggerCurrent.on("pressmove",function(evt) {
			// currentTarget will be the container that the event listener was added to:
			evt.currentTarget.x = evt.stageX;
			evt.currentTarget.y = evt.stageY;
			// make sure to redraw the stage to show the change:
			stage.update(); 

			showRangeValue('currentAxisValueX',evt.stageX); 				
			showRangeValue('currentAxisValueY',evt.stageY);
		});


		// Selector Target
		// Add circle for Target selector obj
		selectorTarget = new createjs.Shape();
		selectorTarget.graphics.beginFill("blue").drawCircle(0, 0, 20);
		
		var labelTarget = new createjs.Text("Target", "bold 10px Arial", "#FFFFFF");
		labelTarget.textAlign = "center";
		labelTarget.y = -7;
		
		var draggerTarget = new createjs.Container();
		draggerTarget.x = draggerTarget.y = 50;
		draggerTarget.addChild(selectorTarget, labelTarget);
		stage.addChild(draggerTarget);
		
		draggerTarget.on("pressmove",function(evt) {
			// currentTarget will be the container that the event listener was added to:
			evt.currentTarget.x = evt.stageX;
			evt.currentTarget.y = evt.stageY;
			// make sure to redraw the stage to show the change:
			stage.update(); 

			showRangeValue('targetAxisValueX',evt.stageX); 				
			showRangeValue('targetAxisValueY',evt.stageY);
		});

		
		stage.update();
	}//\init()


	/**
	 * addObjects()
	 * Function used to add object observations (features)
	 * to the feature space (canvas)
	 * As the canvas is two dimensions (x,y) we only add 
	 * two observations (features) to this space for each object.
	 */
	function addObjects(){}


	/**
	 * showRangeValue()
	 * Function used to change the display of values on page.
	 * given elementId and value.
	 */
	function showRangeValue(elementId,value){
		document.getElementById(elementId).value = value;
	}


	/**
	 * setCanvasSize()
	 * Update the width and height variables for canvas size.
	 */
	function setCanvasSize(){
		document.getElementById(canvasId).width = canvasWidth;
		document.getElementById(canvasId).height = canvasHeight;
	}

	</script>

</head>
 <body onload="init();">
	<canvas id="demoCanvas" width="0" height="0">
		alternate content
	</canvas>

	<p>Current X:<input type="number" class="" value="0" id="currentAxisValueX"> Y:<input type="number" class="" value="0" id="currentAxisValueY"></p>
	<p>Target  X:<input type="number" class="" value="0" id="targetAxisValueX"> Y:<input type="number" class="" value="0" id="targetAxisValueY"></p>





 </body>
</html>
